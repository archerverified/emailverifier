# =============================================================================
# Lead Validator - Environment Configuration
# =============================================================================
# Copy this file to .env and update values for your environment.
# DO NOT commit .env to version control!

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=5050
HOST=0.0.0.0
FLASK_ENV=production

# -----------------------------------------------------------------------------
# Validator Mode
# -----------------------------------------------------------------------------
# 'real' - Full SMTP/DNS verification (production)
# 'mock' - Deterministic testing mode (no network calls)
VALIDATOR_MODE=real

# -----------------------------------------------------------------------------
# Upload Limits
# -----------------------------------------------------------------------------
MAX_UPLOAD_MB=25
MAX_CSV_ROWS=10000
MAX_LINE_LENGTH=10000

# -----------------------------------------------------------------------------
# SMTP/DNS Configuration
# -----------------------------------------------------------------------------
# Increase timeouts for slow mail servers
SMTP_TIMEOUT_SECONDS=20
DNS_TIMEOUT_SECONDS=5

# Retry configuration (reduces false "risky" results)
SMTP_RETRIES=1
RETRY_BACKOFF_MS=900

# SMTP concurrency control
SMTP_GLOBAL_WORKERS=15
SMTP_PER_DOMAIN_LIMIT=2

# DNS cache TTL (minutes)
DNS_CACHE_TTL_MINUTES=30

# -----------------------------------------------------------------------------
# Job Management
# -----------------------------------------------------------------------------
MAX_CONCURRENT_JOBS=3
JOB_STALL_TIMEOUT_MINUTES=10
JOB_HEARTBEAT_INTERVAL_ROWS=10

# -----------------------------------------------------------------------------
# Data Retention
# -----------------------------------------------------------------------------
RETENTION_DAYS=14
MAX_JOBS=200

# -----------------------------------------------------------------------------
# Security - API Key Authentication
# -----------------------------------------------------------------------------
# Set a strong, unique API key for production!
# Leave empty to disable auth (development only)
APP_API_KEY=CHANGE_ME__GENERATE_WITH_OPENSSL_RAND_HEX_32

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Requests per minute per IP address
RATE_LIMIT_IP_PER_MINUTE=10

# Requests per minute per API key
RATE_LIMIT_KEY_PER_MINUTE=100

# -----------------------------------------------------------------------------
# Storage Paths (Docker)
# -----------------------------------------------------------------------------
# These are container paths; data is mounted from ./data/storage on host
STORAGE_DIR=/app/storage
DB_PATH=/app/storage/lead_validator.db

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
# Leave empty for localhost-only (default)
# Example: CORS_ORIGINS=https://app.example.com,https://admin.example.com
# If you serve UI + API on the same origin (recommended), you can leave this blank.
# If you ever serve UI from another origin (e.g. Vercel), set it to that origin.
CORS_ORIGINS=https://validator.2ndimpression.co

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# HTTPS / Domain (for Caddy)
# -----------------------------------------------------------------------------
# Your domain name - Caddy will auto-provision Let's Encrypt certificate
DOMAIN=validator.2ndimpression.co
